{{$pathParts := splitList "/" .OriginalReq.URL.Path}}
{{$markdownFilename := default "index" (slice $pathParts 2 | join "/")}}
{{$markdownFilePath := printf "/doc/md/%s.md" $markdownFilename}}
{{if not (fileExists $markdownFilePath)}}{{httpError 404}}{{end}}
{{$markdownFile := (include $markdownFilePath | splitFrontMatter)}}
{{$title := default $markdownFilename $markdownFile.Meta.title}}
<!doctype html>
<html>
    <head>
        <title>{{$title}}</title>
        {{include "/inc/head.html"}}
    </head>
    <body>
        {{include "/inc/nav.html"}}
        <main class="container">
            <section>{{markdown $markdownFile.Body}}</section>
            {{include "/inc/footer.html"}}
        </main>
    </body>
</html>
